## 핵심 질문 (Key Questions)
**혼잡 제어를 하고자 한다.**
- 혼잡이 있을 경우, *전송률을 감소*시켜 혼잡을 피하거나 완화, 제거한다.
- 혼잡이 없을 경우, *전송률을 증가*시켜 대역폭을 더 잘 활용한다.

참고: 우리는 TCP의 한 버전인 **TCP Reno**의 주요 특징만을 살펴볼 것이다.
- TCP에는 여기서 논의할 것보다 훨씬 많은 내용이 있다.

## TCP 혼잡 제어의 핵심 용어 (TCP's Congestion Control Keywords)
**주요 상태 및 메커니즘**
- *slow start*: 전송률의 지수적 증가
- *congestion avoidance*(혼잡 회피): **AIMD**(Additive Increase/Multiplicative Decrease)
- *fast recovery* - 빠른 회복
<br/>

**주요 파라미터**
- 혼잡 윈도우: *cwnd*
- 슬로우 스타트 임계값: *ssthresh*
- *MSS*: Maximum Segment Size
- *RTT*: Round-Trip Time
<br/>

**주요 이벤트**
- *ACK received* - 모든 것이 잘 진행되고 있음을 의미
- *timeout* - 매우 나쁜 상황을 의미
- *3 duplicate ACK received* - 나쁜 상황이지만 타임아웃만큼은 아님

## TCP 혼잡 윈도우: cwnd (TCP Congestion Window: cwnd)
TCP에서 혼잡 윈도우(cwnd)는 네트워크의 혼잡 상태를 기반으로 조절되는 중요한 파라미터이다. 이 윈도우는 발신자가 네트워크를 통해 "in-flight" 상태, 즉 아직 확인되지 않은 상태로 전송할 수 있는 데이터의 최대 양을 결정한다.
*cwnd*는 동적이며, 네트워크 혼잡을 감지한다.
> 마지막으로 보낸 바이트 - 마지막으로 확인된 바이트 < = cwnd

*TCP 전송률*:
- 대략적으로 *cwnd* 바이트를 보내고, RTT 동안 ACK를 기다린 후 더 많은 바이트를 보낸다.
	> **전송률** ≈ cwnd / RTT (bytes/sec)

## TCP 슬로우 스타트
- 연결이 시작될 때, 첫 번째 손실 이벤트까지 전송률을 지수적으로 증가시킨다:
	- 초기 혼잡 윈도우(cwnd) = 1 MSS
	- 각 RTT마다 혼잡 윈도우를 두 배로 증가
		- 각 수신된 ACK마다 cwnd를 증가시킴
- 초기 전송률은 느리지만, 매우 빠르게 증가
- 모든 ‘타임아웃’ 이벤트 이후에 슬로우 스타트로 돌아감
- 모든 ‘3중 중복 ACK’ 이벤트 이후에 혼잡 회피로 이동

### 추가 설명

TCP 슬로우 스타트는 연결 초기에 네트워크의 혼잡 상태를 천천히 탐색하면서 전송률을 조절하는 방법입니다. 이 접근 방식의 목적은 네트워크 용량을 초과하지 않으면서 점진적으로 전송량을 늘리는 것입니다.

1. **지수적 증가**: 연결 시작 시, cwnd는 하나의 최대 세그먼트 크기(MSS)로 설정되고, 각 RTT마다 혼잡 윈도우 크기는 이전 크기의 두 배로 증가합니다. 이는 네트워크의 처리량을 빠르게 증가시키는 효과가 있지만, 네트워크의 한계를 빠르게 도달할 수도 있습니다.

2. **혼잡 감지 후 조치**: 첫 번째 패킷 손실(타임아웃)이 감지되면, TCP는 혼잡 윈도우를 초기화하고 다시 슬로우 스타트 단계로 돌아갑니다. 이는 네트워크의 혼잡 상태를 재평가하고 더 안정적인 전송률을 찾기 위함입니다.

3. **혼잡 회피 단계**: 세 번의 중복된 ACK 수신은 네트워크 내 일부 경로에서 패킷 손실이 발생했으나 네트워크 연결이 여전히 유효함을 의미합니다. 이 경우 TCP는 혼잡 회피 단계로 전환하여 혼잡 윈도우의 크기를 보수적으로 조정합니다.

이러한 메커니즘을 통해 TCP는 네트워크의 혼잡 상태를 효과적으로 관리하고, 데이터 전송의 신뢰성과 효율성을 높이는데 기여합니다.

