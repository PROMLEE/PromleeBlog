
# 5.3 intra-AS routing in the Internet:OSPF (인터넷 내부의 AS 내부 라우팅)
## 라우팅을 확장 가능하게 만들기
- 지금까지의 라우팅 연구는 이상화되었음
	- 모든 라우터가 동일하다
	- 네트워크가 *평평하다*
	- ...실제로는 그렇지 않다

- 규모: 수십억 개의 목적지가 있는 경우
	- 모든 목적지를 라우팅 테이블에 저장할 수 없다
	- 라우팅 테이블 교환이 링크를 압도할 것이다

- 관리적 자율성
	- 인터넷 = 네트워크의 네트워크
	- 각 네트워크 관리자는 자신의 네트워크 내부의 라우팅을 제어하고 싶어할 수 있다.

## 확장 가능한 라우팅을 위한 인터넷 접근 방식
- 라우터를 *Autonomous System*으로 그룹화
	- AS = Autonomous System(AKA. *도메인*)
- **자율 시스템 내부 라우팅(Intra-AS Routing)**
	- 동일한 AS(네트워크) 내부의 호스트 및 라우터 간의 라우팅
	- AS 내의 모든 라우터는 동일한 인트라 도메인 프로토콜을 실행해야 함
	- 다른 AS에 있는 라우터는 다른 인트라 도메인 라우팅 프로토콜을 실행할 수 있음
	- 게이트웨이 라우터: 자신의 AS의 *가장자리*에 있으며, 다른 AS의 라우터와 연결된 링크를 가진다
- **자율 시스템 간 라우팅(Inter-AS Routing)**
	- AS 간의 라우팅
	- 게이트웨이는 인트라 도메인 라우팅뿐만 아니라 인터 도메인 라우팅을 수행함

## 상호 연결된 AS들 (Interconnected ASes)
- 포워딩 테이블은 인트라-AS 및 인터-AS 라우팅 알고리즘에 의해 구성됨
	- 인트라-AS 라우팅은 AS 내 목적지에  대한 항목을 결정함
	- 인터-AS 및 인트라-AS 라우팅은 외부 목적지에 대한 항목을 결정함

## 인터-AS 작업 (Inter-AS tasks)
- AS1의 라우터가 AS1 외부로 향하는 데이터그램을 수신한다고 가정하자:
    - 라우터는 패킷을 게이트웨이 라우터로 전달해야 하지만, 어떤 라우터로 전달해야 할까?
- AS1은 다음을 수행해야 한다:
    1. AS2를 통해 도달 가능한 목적지와 AS3를 통해 도달 가능한 목적지를 학습함
    2. 이 도달 가능성 정보를 AS1의 모든 라우터에 전파함
- 인터-AS 라우팅의 역할!

## 인트라-AS 라우팅 (Intra-AS Routing)
- 내부 게이트웨이 프로토콜 (IGP)로도 알려져 있음
- 가장 일반적인 인트라-AS 라우팅 프로토콜:
    - **RIP: 라우팅 정보 프로토콜 (Routing Information Protocol)**
        - 벨만-포드 알고리즘의 변형
    - **OSPF: 개방형 최단 경로 우선 (Open Shortest Path First)**
        - IS-IS 프로토콜은 본질적으로 OSPF와 동일
        - 다익스트라 알고리즘의 변형
    - **IGRP: 내부 게이트웨이 라우팅 프로토콜 (Interior Gateway Routing Protocol)**
        - 시스코 독점 프로토콜로 수십 년간 사용됨, 2016년까지

## OSPF (Open Shortest Path First)
- *Open*: 공개적으로 사용 가능
- 링크 상태 알고리즘 사용
	- 링크 상태 패킷 전파
	- 각 노드에서의 토폴로지(topology) 맵
	- 다익스트라 알고리즘을 사용하여 최단 경로 계산
- 라우터는 전체 AS의 다른 모든 라우터에 OSPF 링크 상태 광고를 전파
	- TCP나 UDP가 아닌 IP를 통해 직접 OSPF 메시지에 실려 전송됨
	- 링크 상태: 각 연결된 링크에 대해
- IS-IS 프로토콜은 OSPF와 매우 유사하며, OSPF와 동일한 목표를 가짐
