## 인터넷 인터-AS 라우팅: BGP (Internet Inter-AS Routing: BGP)
**BGP**(Border Gateway Protocol): 사실상의 인터 도메인 라우팅 프로토콜
- 인터넷을 하나로 묶는 접착제
BGP는 각 AS에 다음과 같은 수단 제공
- eBGP: 인접한 AS 간 라우팅 정보 교환
- iBGP: AS 내부에서 라우팅 정보 교환
서브넷이 인터넷의 나머지 부분에 자신의 존재를 광고할 수 있도록 함

## eBGP, iBGP 연결 (eBGP, iBGP Connections)
- eBGP: 서로 다른 AS 간의 BGP 연결
- iBGP: 같은 AS 내의 BGP 연결
<Img src="/posts/240618-081530.png" width={400}/>
게이트웨이 라우터는 eBGP 및 iBGP 프로토콜을 모두 실행함

## BGP 기본 작동 원리 (BGP Basic Operation)
**BGP 세션**: 두 BGP 라우터(Peer) 간의 반영구적 TCP 연결을 통해 BGP메시지 교환
- 다른 목적지 네트워크 프리픽스로의 경로를 알림(BGP는 *경로 벡터* 프로토콜)
<Img src="/posts/240618-082034.png" width={500}/>
AS3 게이트웨이 라우터 3a가 경로 'AS3,X'를 AS2 게이트웨이 라우터 2c에 광고할 때
AS3는 AS2에게 X로 가는 데이터그램을 전달할 것을 약속함

## BGP 경로 선택 (BGP Route Selection)
BGP는 여러 경로 중 하나를 선택해야 함
1. 로컬 우선값 속성: 정책 결정
2. 가장 짧은 AS-경로
3. 가장 가까운 다음 홉 라우터: *핫 포테이토 라우팅*
4. 추가 기준

## 핫 포테이토 라우팅 (Hot Potato Routing)
<Img src="/posts/240618-110450.png" width={500}/>
2d는 iBGP를 통해 2a 또는 2c를 통해 X로 라우팅할 수 있음을 학습함
핫 포테이토 라우팅: 인트라 도메인 비용이 가장 적은 로컬 게이트웨이를 선택함
- 예: 2d는 X로 가는 AS 홉 수가 더 많음에도 불구하고 2a를 선택함
- 인터 도메인 비용은 걱정하지 않음!

## 인트라 도메인과 인터 도메인 라우팅 비교 (Intra- vs. Inter-AS Routing)
정책:
- 인트라-AS: 단일 관리자, 정책 결정 불필요
- 인터-AS: 관리자가 트래픽 라우팅 방법 및 경유자 통제 원함

규모:
- 계층적 라우팅은 테이블 크기 절약, 업데이트 트래픽 감소

성능:
- 인트라-AS: 라우팅 알고리즘은 성능에 중점
- 인터-AS: 정책이 성능보다 우선일 수 있음